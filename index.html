<!-- JQuery used, available at http://code.jquery.com/jquery-2.2.0.min.js -->
<html>
<head>
	<title>
		Tree probability calculator
	</title>
	<style>
		.draggable {background-color: red; width : 70px; height : 70px; position : absolute;
		margin-left: -35px; margin-top: -35px; z-index: 2;}
	</style>
	<script src="jquery-2.2.0.min.js"></script>
	<script src="line.js"></script>
	<script>
		function init(){
			// Prevent context menu
			$("body").contextmenu(function(){
				return false;
			});
			// Draggable
			$(".draggable").mousedown(function(event){
				if(event.which == 1){
					// Movement
					$(this).mousemove(function(event){
						this.style.top = event.pageY;
						this.style.left = event.pageX;
					});
					
					// Stop movement
					$(this).mouseup(function(){
						$(this).unbind("mousemove");
					});
					
					$(this).mouseleave(function(){
						$(this).unbind("mousemove");
					});
				}
			});
			// Draw lines
			// Initialization
			$("body").mousedown(function(event){
				if(event.which == 3){
					// Create and append line
					currentLine = new Line(event.pageX, event.pageY, event.pageX, event.pageY);
					//console.log(currentLine, event.pageX, even)
					$("body").append(currentLine.line);
				}
			});
			// Mouse movement
			$("body").mousemove(function(event){
				if(currentLine)
					currentLine.updateEndpoint(event.pageX, event.pageY);
			});
			// Finisher
			$("body").mouseup(function(event){
				if(event.which == 3){
					currentLine = false;
				}
			});
		};
		
		currentLine = false;
		$("body").ready(init);
		
	</script>
</head>
<body>
	<div class="draggable"></div>
</body>
</html>